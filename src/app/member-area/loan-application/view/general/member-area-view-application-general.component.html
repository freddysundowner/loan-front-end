<div class="row">
    <div class="col-md-12">
                        <mat-accordion class="example-headers-align">

                            <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>

                                <div class="row" *ngIf="(loanApplicationData$|async)?.reviewed_on">
                                    <div class="col-12">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Review Notes</mat-label>
                                            <input matInput placeholder="Other Banking Details" disabled value="{{(loanApplicationData$|async)?.rejection_notes}}">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Loan Type</mat-label>
                                            <input matInput placeholder="Loan Type" disabled value="{{(loanApplicationData$|async)?.loanType?.name}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Amount Applied</mat-label>
                                            <input matInput placeholder="Amount Applied" disabled value="{{(loanApplicationData$|async)?.amount_applied_display}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Repayment Period</mat-label>
                                            <input matInput placeholder="Repayment Period" disabled value="{{(loanApplicationData$|async)?.repayment_period}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Interest Rate</mat-label>
                                            <input matInput placeholder="Interest Rate" disabled value="{{(loanApplicationData$|async)?.interest_rate}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Application Date</mat-label>
                                            <input matInput placeholder="Application Date" disabled value="{{(loanApplicationData$|async)?.application_date_display}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Member ID</mat-label>
                                            <input matInput placeholder="Member ID" disabled value="{{(loanApplicationData$|async)?.member?.id_number}}">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>First Name</mat-label>
                                            <input matInput placeholder="First Name" disabled value="{{(loanApplicationData$|async)?.member?.first_name}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Last Name</mat-label>
                                            <input matInput placeholder="Last Name" disabled value="{{(loanApplicationData$|async)?.member?.last_name}}">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>National ID</mat-label>
                                            <input matInput placeholder="National ID" disabled value="{{(loanApplicationData$|async)?.member?.id_number}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Phone</mat-label>
                                            <input matInput placeholder="Phone" disabled value="{{(loanApplicationData$|async)?.member?.phone}}">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6" *ngIf="applicationForm">
                                        <div class="d-flex spinner-container" *ngIf="loader">
                                            <mat-spinner [diameter]="40"></mat-spinner>
                                        </div>

                                        <button mat-raised-button *ngIf="!loader" (click)="downloadForm()">
                                            <i class="material-icons">
                                                cloud_download
                                            </i> Loan Application Form
                                        </button>
                                    </div>
                                </div>

                                <mat-action-row>
                                    <button mat-button color="primary" (click)="nextStep()">Next</button>
                                </mat-action-row>
                            </mat-expansion-panel>

                            <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        2.  Disburse Information
                                    </mat-panel-title>
                                </mat-expansion-panel-header>

                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Disburse Method</mat-label>
                                            <input matInput placeholder="Disburse Method" disabled value="{{(loanApplicationData$|async)?.disburseMethod?.display_name}}">
                                        </mat-form-field>
                                    </div>
                                    <!--<div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Mpesa Number</mat-label>
                                            <input matInput placeholder="Mpesa Number" disabled value="{{(loanApplicationData$|async)?.mpesa_number}}">
                                        </mat-form-field>
                                    </div>-->
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Bank Name</mat-label>
                                            <input matInput placeholder="Bank Name" disabled value="{{(loanApplicationData$|async)?.bank_name}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Bank Branch</mat-label>
                                            <input matInput placeholder="Bank Branch" disabled value="{{(loanApplicationData$|async)?.bank_branch}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Account Number</mat-label>
                                            <input matInput placeholder="Account Number" disabled value="{{(loanApplicationData$|async)?.cheque_number}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Other Banking Details</mat-label>
                                            <input matInput placeholder="Other Banking Details" disabled value="{{(loanApplicationData$|async)?.other_banking_details}}">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <mat-action-row>
                                    <button mat-button color="warn" (click)="prevStep()">Previous</button>
                                    <button mat-button color="primary" (click)="nextStep()">Next</button>
                                </mat-action-row>
                            </mat-expansion-panel>

                            <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
                                <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        3. Witness Information
                                    </mat-panel-title>
                                </mat-expansion-panel-header>

                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Witness Type</mat-label>
                                            <input matInput placeholder="Witness Type" disabled value="{{(loanApplicationData$|async)?.witnessType?.display_name}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>First Name</mat-label>
                                            <input matInput placeholder="First Name" disabled value="{{(loanApplicationData$|async)?.witness_first_name}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Last Name</mat-label>
                                            <input matInput placeholder="Last Name" disabled value="{{(loanApplicationData$|async)?.witness_last_name}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Phone</mat-label>
                                            <input matInput placeholder="Phone" disabled value="{{(loanApplicationData$|async)?.witness_phone}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Email</mat-label>
                                            <input matInput placeholder="Email" disabled value="{{(loanApplicationData$|async)?.witness_email}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>National ID</mat-label>
                                            <input matInput placeholder="National ID" disabled value="{{(loanApplicationData$|async)?.witness_national_id}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Country</mat-label>
                                            <input matInput placeholder="Country" disabled value="{{(loanApplicationData$|async)?.witness_country}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Region</mat-label>
                                            <input matInput placeholder="Region" disabled value="{{(loanApplicationData$|async)?.witness_county}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>City / Town</mat-label>
                                            <input matInput placeholder="City / Town" disabled value="{{(loanApplicationData$|async)?.witness_city}}">
                                        </mat-form-field>
                                    </div>
                                    <div class="col-6">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Postal Address</mat-label>
                                            <input matInput placeholder="Postal Address" disabled value="{{(loanApplicationData$|async)?.witness_postal_address}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12">
                                        <mat-form-field color="primary" appearance="outline">
                                            <mat-label>Residential Address</mat-label>
                                            <input matInput placeholder="Residential Address" disabled value="{{(loanApplicationData$|async)?.witness_residential_address}}">
                                        </mat-form-field>
                                    </div>
                                </div>
                                <mat-action-row>
                                    <button mat-button color="warn" (click)="prevStep()">Previous</button>
                                </mat-action-row>
                            </mat-expansion-panel>

                        </mat-accordion>
    </div>
</div>
